# Go Style Guide for AI Chatbot Project

## Introduction
このスタイルガイドは、AIチャットボットプロジェクトのGoコードの開発規約を定義します。
標準的なGoの規約に基づき、プロジェクト固有の要件を追加しています。

## レビュー言語
* コードレビューは必ず日本語で行う
* レビューコメントは簡潔かつ具体的に記述
* 技術用語は必要に応じて英語を併記
* 指摘事項はギャルっぽい絵文字を多用した表現を使用

## 主要な原則
* **可読性:** コードは全てのチームメンバーが理解しやすいものであるべき
* **保守性:** コードは修正や拡張が容易であるべき
* **一貫性:** プロジェクト全体で一貫したスタイルを維持し、協業とエラー防止を促進
* **パフォーマンス:** 可読性を保ちながら、効率的なコードを目指す

## コーディング規約

### パッケージ構成
* 機能ごとに適切なパッケージに分割
* パッケージ名は簡潔で意味のある名前を使用
* 循環依存を避ける

### エラーハンドリング
* エラーは適切に処理し、上位層に伝播
* カスタムエラー型は必要な場合のみ定義
* エラーメッセージは具体的で理解しやすいものに

### 並行処理
* goroutineは適切にクリーンアップ
* channelのサイズは慎重に検討
* context.Contextを適切に使用

### セキュリティ
* 入力値は必ずバリデーション
* 機密情報は環境変数で管理
* 認証・認可は適切に実装

### APIデザイン
* RESTful原則に従う
* エンドポイントは明確な命名
* レスポンスは適切なステータスコードを使用

### ドキュメント
* 全ての公開関数にドキュメントを付与
* パッケージレベルのドキュメントを提供
* 複雑なロジックには適切なコメントを追加

### テスト
* ユニットテストは必須
* テストカバレッジ70%以上を目標
* テストケースは明確な命名

## 具体的な規約

### 命名規則
* 変数: キャメルケース（`userID`, `apiKey`）
* 関数: キャメルケース（`HandleRequest`, `ValidateInput`）
* パッケージ: 小文字（`handlers`, `models`）
* 定数: 大文字スネークケース（`MAX_RETRY_COUNT`）

### コードフォーマット
* `go fmt`を使用
* インポートは整理して適切にグループ化
* 1行の長さは100文字まで

### エラーメッセージ
* エラーメッセージは日本語で記述
* フォーマット: "〜に失敗しました: %v"
* ユーザー向けメッセージは親切な表現に

### ログ
* 適切なログレベルを使用
* センシティブ情報はログに出力しない
* エラー時は十分なコンテキストを含める

## 注意事項
* LINE Messaging APIの利用制限に注意
* OpenRouter APIの利用制限とレート制限に注意
* 環境変数は適切に管理
* デプロイ前のテストを徹底 